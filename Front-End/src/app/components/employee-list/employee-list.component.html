<div class="p-4">
  <div class="header-container">
    <div class="left-section">
      <h2>Manage Employee</h2>
      <small>View and Manage Employee Information</small>
    </div>

    <div class="center-section">
      <button pButton label="Export Employees"></button>
    </div>

    <div class="right-section">
      <button pButton label="+ Add Employee" (click)="openAddModal()"></button>
    </div>
  </div>

  <p-toast position="top-right" closable="true"></p-toast>
  <p-table
    [value]="employees"
    [paginator]="true"
    [rows]="5"
    stripedRows
    showGridlines
    responsiveLayout="scroll"
  >
    <ng-template pTemplate="header">
      <tr>
        <th class="action-btn">Employee</th>
        <th class="action-btn">Gender/Age</th>
        <th class="action-btn">Employee ID</th>
        <th class="action-btn">Group</th>
        <th class="action-btn">Designation</th>
        <th class="action-btn">Department</th>
        <th class="action-btn">Reporting Manager</th>
        <th class="action-btn">Status</th>
        <th class="action-btn">Print</th>
        <th class="action-btn"></th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-employee>
      <tr>
        <td>
          <div class="flex flex-column">
            <strong> {{ employee.firstName }} {{ employee.lastName }} </strong>
            <small>{{ employee.personDetails?.email }}</small>
            <small>{{ employee.mobile }}</small>
          </div>
        </td>

        <td>
          {{ employee.gender }}
          <ng-container *ngIf="employee.age"> / {{ employee.age }} </ng-container>
        </td>

        <td>{{ employee.employeeId }}</td>
        <td>{{ employee.personDetails?.employeeGroup }}</td>
        <td>{{ employee.personDetails?.designation }}</td>
        <td>{{ employee.personDetails?.department }}</td>
        <td>{{ employee.personDetails?.reportingManager || '-' }}</td>

        <td>
          <p-tag
            [value]="employee.personDetails?.status"
            [severity]="getStatusSeverity(employee.personDetails?.status)"
          >
          </p-tag>
        </td>

        <td class="action-cell">
          <button
            pButton
            icon="pi pi-print"
            title="Print"
            (click)="printEmployee(employee.employeeId)">
          </button>
        </td>

        <td class="action-cell">
          <p-menu #menu [popup]="true" [model]="getMenuItemsForEmployee(employee)" appendTo="body">
          </p-menu>

          <button
            pButton
            icon="pi pi-ellipsis-v"
            type="button"
            class="action-btn"
            (click)="menu.show($event)"
          ></button>
        </td>
      </tr>
    </ng-template>
  </p-table>

  <!-- EMPLOYEE MODAL -->
  <app-employee-modal
    #empModal
    [(visible)]="showModal"
    [employee]="selectedEmployee"
    [isEditMode]="isEditMode"
    (save)="onEmployeeSaved()"
  >
  </app-employee-modal>
</div>
